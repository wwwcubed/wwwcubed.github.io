"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8692],{4646:function(t,s,a){a.d(s,{n:function(){return normalizeChainId}});function normalizeChainId(t){return"string"==typeof t?Number.parseInt(t,"0x"===t.trim().substring(0,2)?16:10):"bigint"==typeof t?Number(t):t}},38692:function(t,s,a){a.d(s,{PaperWalletConnector:function(){return PaperWalletConnector}});var l=a(16074),h=a(42009),g=a(67885),p=a(19485),w=a(79311),f=a(27021),_=a(4646);a(54146);var E=new WeakMap;let PaperWalletConnector=class PaperWalletConnector extends f.C{constructor(t){super(),(0,h._)(this,"id",w.w.paper),(0,h._)(this,"name","Paper Wallet"),(0,h._)(this,"ready",!0),(0,h._)(this,"user",null),(0,l._)(this,E,{writable:!0,value:void 0}),(0,h._)(this,"onAccountsChanged",async t=>{0===t.length?await this.onDisconnect():this.emit("change",{account:p.getAddress(t[0])})}),(0,h._)(this,"onChainChanged",t=>{let s=(0,_.n)(t),a=-1===this.options.chains.findIndex(t=>t.chainId===s);this.emit("change",{chain:{id:s,unsupported:a}})}),(0,h._)(this,"onDisconnect",async()=>{this.emit("disconnect")}),this.options=t}getPaperSDK(){return this.paper||(this.paper=new Promise(async(t,s)=>{let l=this.options.advancedOptions?.recoveryShareManagement;try{let{PaperEmbeddedWalletSdk:s}=await Promise.resolve().then(a.bind(a,67885)),h={AWS_MANAGED:g.pw.AWS_MANAGED,USER_MANAGED:g.pw.USER_MANAGED},p=l?h[l]:void 0;t(new s({advancedOptions:{recoveryShareManagement:p},clientId:this.options.clientId,chain:"Ethereum",styles:this.options.styles}))}catch(t){s(t)}})),this.paper}async connect(t){let s=await this.getPaperSDK();if(!s)throw Error("Paper SDK not initialized");let a=await s.getUser();switch(a.status){case g.J0.LOGGED_OUT:{let a;if(t?.googleLogin){let l=t.googleLogin;a=await s.auth.loginWithGoogle("object"==typeof l?l:void 0)}else a=t?.email&&t?.otp?await s.auth.verifyPaperEmailLoginOtp({email:t.email,otp:t.otp,recoveryCode:t.recoveryCode}):t?.email?await s.auth.loginWithPaperEmailOtp({email:t.email}):await s.auth.loginWithPaperModal();this.user=a.user;break}case g.J0.LOGGED_IN_WALLET_INITIALIZED:"object"==typeof t?.googleLogin&&t.googleLogin.closeOpenedWindow&&t.googleLogin.openedWindow&&t.googleLogin.closeOpenedWindow(t.googleLogin.openedWindow),this.user=a}if(!this.user)throw Error("Error connecting User");return t?.chainId&&this.switchChain(t.chainId),this.setupListeners(),this.getAddress()}async disconnect(){let t=await this.paper;await t?.auth.logout(),(0,l.a)(this,E,void 0),this.user=null}async getAddress(){let t=await this.getSigner();return t.getAddress()}async isConnected(){try{let t=await this.getAddress();return!!t}catch(t){return!1}}async getProvider(){let t=await this.getSigner();if(!t.provider)throw Error("Provider not found");return t.provider}async getSigner(){if((0,l.b)(this,E))return(0,l.b)(this,E);if(!this.user){let t=await this.getPaperSDK(),s=await t.getUser();s.status===g.J0.LOGGED_IN_WALLET_INITIALIZED&&(this.user=s)}let t=await this.user?.wallet.getEthersJsSigner({rpcEndpoint:this.options.chain.rpc[0]||""});if(!t)throw Error("Signer not found");return(0,l.a)(this,E,t),t}async isAuthorized(){return!1}async switchChain(t){let s=this.options.chains.find(s=>s.chainId===t);if(!s)throw Error("Chain not configured");await this.user?.wallet.setChain({chain:"Ethereum"}),(0,l.a)(this,E,await this.user?.wallet.getEthersJsSigner({rpcEndpoint:s.rpc[0]||""})),this.emit("change",{chain:{id:t,unsupported:!1}})}async setupListeners(){let t=await this.getProvider();t.on&&(t.on("accountsChanged",this.onAccountsChanged),t.on("chainChanged",this.onChainChanged),t.on("disconnect",this.onDisconnect))}updateChains(t){this.options.chains=t}async getEmail(){if(await this.getProvider(),!this.user)throw Error("No user found, Paper Wallet is not connected");return this.user.authDetails.email}}},67885:function(t,s,a){a.d(s,{PaperEmbeddedWalletSdk:function(){return Z},pw:function(){return P},J0:function(){return T}});var l,h,g,p,w={Ethereum:"https://ethereum.rpc.thirdweb.com",Goerli:"https://goerli.rpc.thirdweb.com",Mumbai:"https://mumbai.rpc.thirdweb.com",Polygon:"https://polygon.rpc.thirdweb.com",Avalanche:"https://avalanche.rpc.thirdweb.com",Optimism:"https://optimism.rpc.thirdweb.com",OptimismGoerli:"https://optimism-goerli.rpc.thirdweb.com",BSC:"https://binance.rpc.thirdweb.com",BSCTestnet:"https://binance-testnet.rpc.thirdweb.com",ArbitrumOne:"https://arbitrum.rpc.thirdweb.com",ArbitrumGoerli:"https://arbitrum-goerli.rpc.thirdweb.com",Fantom:"https://fantom.rpc.thirdweb.com",FantomTestnet:"https://fantom-testnet.rpc.thirdweb.com",Sepolia:"https://sepolia.rpc.thirdweb.com",AvalancheFuji:"https://avalanche-fuji.rpc.thirdweb.com"},e=()=>"undefined"!=typeof window&&"true"===window.localStorage.getItem("IS_PAPER_DEV"),i=()=>"undefined"!=typeof window&&window.location.origin.includes("paper.xyz"),r=()=>"undefined"!=typeof window&&window.location.origin.includes("thirdweb.com"),dist_n=()=>{var t;return e()?null!=(t=window.localStorage.getItem("PAPER_DEV_URL"))?t:"http://localhost:3000":i()||r()?window.location.origin:"https://withpaper.com"},f=a(27349),_=a(48088),E=a(6881),A=Object.defineProperty,S=Object.defineProperties,O=Object.getOwnPropertyDescriptors,D=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,k=(t,s,a)=>s in t?A(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,u=(t,s)=>{for(var a in s||(s={}))C.call(s,a)&&k(t,a,s[a]);if(D)for(var a of D(s))M.call(s,a)&&k(t,a,s[a]);return t},y=(t,s)=>S(t,O(s)),dist_i=(t,s,a)=>new Promise((l,h)=>{var o=t=>{try{d(a.next(t))}catch(t){h(t)}},n=t=>{try{d(a.throw(t))}catch(t){h(t)}},d=t=>t.done?l(t.value):Promise.resolve(t.value).then(o,n);d((a=a.apply(t,s)).next())}),N="/sdk/2022-08-12/embedded-wallet",L=t=>`paperEwsWalletUserId-${t}`,I=t=>`walletToken-${t}`,W=(t,s)=>`a-${t}-${s}`,P=((l=P||{}).USER_MANAGED="USER_MANAGED",l.AWS_MANAGED="AWS_MANAGED",l),b=((h=b||{}).PAPER_EMAIL_OTP="PaperEmailOTP",h.GOOGLE="Google",h.TWITTER="Twitter",h.COGNITO="Cognito",h.AUTH0="Auth0",h.CUSTOM_JWT="CustomJWT",h),T=((g=T||{}).LOGGED_OUT="Logged Out",g.LOGGED_IN_WALLET_INITIALIZED="Logged In, Wallet Initialized",g),G=((p=G||{}).LOGGED_OUT="Logged Out",p.LOGGED_IN_WALLET_UNINITIALIZED="Logged In, Wallet Uninitialized",p.LOGGED_IN_NEW_DEVICE="Logged In, New Device",p.LOGGED_IN_WALLET_INITIALIZED="Logged In, Wallet Initialized",p),U=new Map,R=class{constructor({clientId:t}){this.isSupported="undefined"!=typeof window&&!!window.localStorage,this.clientId=t}getItem(t){return dist_i(this,null,function*(){var s;return this.isSupported?window.localStorage.getItem(t):null!=(s=U.get(t))?s:null})}setItem(t,s){return dist_i(this,null,function*(){if(this.isSupported)return window.localStorage.setItem(t,s);U.set(t,s)})}removeItem(t){return dist_i(this,null,function*(){let s=yield this.getItem(t);return!!this.isSupported&&!!s&&(window.localStorage.removeItem(t),!0)})}saveAuthCookie(t){return dist_i(this,null,function*(){yield this.setItem(I(this.clientId),t)})}getAuthCookie(){return dist_i(this,null,function*(){return this.getItem(I(this.clientId))})}removeAuthCookie(){return dist_i(this,null,function*(){return this.removeItem(I(this.clientId))})}saveDeviceShare(t,s){return dist_i(this,null,function*(){yield this.saveWalletUserId(s),yield this.setItem(W(this.clientId,s),t)})}getDeviceShare(){return dist_i(this,null,function*(){let t=yield this.getWalletUserId();return t?this.getItem(W(this.clientId,t)):null})}removeDeviceShare(){return dist_i(this,null,function*(){let t=yield this.getWalletUserId();return!!t&&this.removeItem(W(this.clientId,t))})}getWalletUserId(){return dist_i(this,null,function*(){return this.getItem(L(this.clientId))})}saveWalletUserId(t){return dist_i(this,null,function*(){yield this.setItem(L(this.clientId),t)})}removeWalletUserId(){return dist_i(this,null,function*(){return this.removeItem(L(this.clientId))})}};function v(t){return new Promise(s=>{setTimeout(s,1e3*t)})}var j={height:"100%",width:"100%",border:"none",backgroundColor:"transparent",colorScheme:"light",position:"fixed",top:"0px",right:"0px",zIndex:"2147483646",display:"none"},q=new Map,z=class{constructor({link:t,iframeId:s,container:a=document.body,iframeStyles:l,onIframeInitialize:h}){this.POLLING_INTERVAL_SECONDS=1.4,this.POST_LOAD_BUFFER_SECONDS=1;let g=document.getElementById(s),p=new URL(t),w="1.2.5";if(!w)throw Error("Missing SDK_VERSION env var");if(p.searchParams.set("sdkVersion",w),!g||g.src!=p.href){if(!g){g=document.createElement("iframe");let t=u(u({},j),l);Object.assign(g.style,t),g.setAttribute("id",s),g.setAttribute("fetchpriority","high"),a.appendChild(g)}g.src=p.href,g.setAttribute("data-version",w),g.onload=this.onIframeLoadHandler(g,this.POST_LOAD_BUFFER_SECONDS,h)}this.iframe=g}onIframeLoadedInitVariables(){return dist_i(this,null,function*(){return{}})}onIframeLoadHandler(t,s,a){return()=>dist_i(this,null,function*(){yield new Promise((l,h)=>dist_i(this,null,function*(){var g;let p=new MessageChannel;p.port1.onmessage=s=>{let{data:g}=s;return p.port1.close(),g.success?(q.set(t.src,!0),a&&a(),l(!0)):h(Error(g.error))},yield v(s),null==(g=null==t?void 0:t.contentWindow)||g.postMessage({eventType:"initIframe",data:yield this.onIframeLoadedInitVariables()},`${dist_n()}${N}`,[p.port2])}))})}call(t){return dist_i(this,arguments,function*({procedureName:t,params:s,showIframe:a=!1,injectRecoveryCode:l={isInjectRecoveryCode:!1}}){for(;!q.get(this.iframe.src);)yield v(this.POLLING_INTERVAL_SECONDS);return a&&(this.iframe.style.display="block",yield v(.005)),new Promise((h,g)=>{var p;if(l.isInjectRecoveryCode){let c=t=>dist_i(this,null,function*(){var s,a;if(t.origin!==dist_n()||"paper_getRecoveryCode"!==t.data.type||"string"!=typeof t.data.userWalletId)return;let h=yield null==(s=l.getRecoveryCode)?void 0:s.call(l,t.data.userWalletId);null==(a=this.iframe.contentWindow)||a.postMessage({type:"paper_getRecoveryCode_response",recoveryCode:h},dist_n()),window.removeEventListener("message",c)});window.addEventListener("message",c)}let w=new MessageChannel;w.port1.onmessage=t=>dist_i(this,null,function*(){let{data:s}=t;w.port1.close(),a&&(yield v(.1),this.iframe.style.display="none"),s.success?h(s.data):g(Error(s.error))}),null==(p=this.iframe.contentWindow)||p.postMessage({eventType:t,data:s},`${dist_n()}${N}`,[w.port2])})})}destroy(){q.delete(this.iframe.src)}},Q=class extends z{constructor({clientId:t,customizationOptions:s}){super({iframeId:F,link:function({clientId:t,path:s,queryParams:a}){var l;let h=new URL(s,dist_n());if(a)for(let t of Object.keys(a))h.searchParams.set(t,(null==(l=a[t])?void 0:l.toString())||"");return h.searchParams.set("clientId",t),h}({clientId:t,path:N,queryParams:s}).href,container:document.body}),this.clientId=t}onIframeLoadedInitVariables(){return dist_i(this,null,function*(){let t=new R({clientId:this.clientId});return{authCookie:yield t.getAuthCookie(),deviceShareStored:yield t.getDeviceShare(),walletUserId:yield t.getWalletUserId(),clientId:this.clientId}})}},F="paper-embedded-wallet-iframe",x=class{constructor({querier:t,preLogin:s,postLogin:a,clientId:l}){this.LoginQuerier=t,this.preLogin=s,this.postLogin=a,this.clientId=l}sendPaperEmailLoginOtp(t){return dist_i(this,arguments,function*({email:t,recoveryShareManagement:s}){yield this.preLogin();let{isNewUser:a,isNewDevice:l,recoveryShareManagement:h}=yield this.LoginQuerier.call({procedureName:"sendPaperEmailLoginOtp",params:{email:t,recoveryShareManagement:s}});return{isNewUser:a,isNewDevice:l,recoveryShareManagement:h}})}},H=class extends x{constructor(){super(...arguments),this.closeWindow=({isWindowOpenedByFn:t,win:s,closeOpenedWindow:a})=>{t?null==s||s.close():s&&a?a(s):s&&s.close()}}loginWithPaperModal(){return dist_i(this,null,function*(){yield this.preLogin();let t=yield this.LoginQuerier.call({procedureName:"loginWithPaperModal",params:{recoveryShareManagement:"AWS_MANAGED"},showIframe:!0,injectRecoveryCode:{isInjectRecoveryCode:!0}});return this.postLogin(t)})}getGoogleLoginUrl(){return dist_i(this,null,function*(){return yield this.LoginQuerier.call({procedureName:"getHeadlessGoogleLoginLink",params:void 0})})}loginWithGoogle(t){return dist_i(this,null,function*(){yield this.preLogin();let s=null==t?void 0:t.openedWindow,a=!1;if(s||(s=window.open("","Login","width=350, height=500"),a=!0),!s)throw Error("Something went wrong opening pop-up");yield this.preLogin();let{loginLink:l}=yield this.getGoogleLoginUrl();s.location.href=l;let h=yield new Promise((l,h)=>{let g=window.setInterval(()=>dist_i(this,null,function*(){s&&s.closed&&(clearInterval(g),window.removeEventListener("message",m),h(Error("User closed login window")))}),1e3),m=p=>dist_i(this,null,function*(){if(p.origin===dist_n()){if("object"!=typeof p.data){h(Error("Invalid event data"));return}switch(p.data.eventType){case"userLoginSuccess":window.removeEventListener("message",m),clearInterval(g),this.closeWindow({isWindowOpenedByFn:a,win:s,closeOpenedWindow:null==t?void 0:t.closeOpenedWindow}),p.data.authResult&&l(p.data.authResult);break;case"userLoginFailed":window.removeEventListener("message",m),clearInterval(g),this.closeWindow({isWindowOpenedByFn:a,win:s,closeOpenedWindow:null==t?void 0:t.closeOpenedWindow}),h(Error(p.data.error));break;case"injectDeveloperClientId":null==s||s.postMessage({eventType:"injectDeveloperClientIdResult",developerClientId:this.clientId},dist_n())}}});window.addEventListener("message",m)});return this.postLogin({storedToken:y(u({},h.storedToken),{shouldStoreCookieString:!0}),walletDetails:y(u({},h.walletDetails),{isIframeStorageEnabled:!1})})})}loginWithPaperEmailOtp(t){return dist_i(this,arguments,function*({email:t}){yield this.preLogin();let s=yield this.LoginQuerier.call({procedureName:"loginWithPaperModal",params:{email:t,recoveryShareManagement:"AWS_MANAGED"},showIframe:!0,injectRecoveryCode:{isInjectRecoveryCode:!0}});return this.postLogin(s)})}verifyPaperEmailLoginOtp(t){return dist_i(this,arguments,function*({email:t,otp:s}){let a=yield this.LoginQuerier.call({procedureName:"verifyPaperEmailLoginOtp",params:{email:t,otp:s,recoveryShareManagement:"AWS_MANAGED"},injectRecoveryCode:{isInjectRecoveryCode:!0}});return this.postLogin(a)})}},J=class extends x{loginWithPaperModal(t){return dist_i(this,null,function*(){yield this.preLogin();let s=yield this.LoginQuerier.call({procedureName:"loginWithPaperModal",params:void 0,showIframe:!0,injectRecoveryCode:{isInjectRecoveryCode:!0,getRecoveryCode:null==t?void 0:t.getRecoveryCode}});return this.postLogin(s)})}loginWithGoogle(t){return dist_i(this,null,function*(){throw Error("loginWithGoogle is not yet supported in the RecoveryShareManagement.USER_MANAGED flow. Please use RecoveryShareManagement.AWS_MANAGED instead.")})}loginWithPaperEmailOtp(t){return dist_i(this,arguments,function*({email:t,recoveryCode:s}){yield this.preLogin();let a=yield this.LoginQuerier.call({procedureName:"loginWithPaperModal",params:{email:t,recoveryCode:s},showIframe:!0,injectRecoveryCode:{isInjectRecoveryCode:!0}});return this.postLogin(a)})}verifyPaperEmailLoginOtp(t){return dist_i(this,arguments,function*({email:t,otp:s,recoveryCode:a}){let l=yield this.LoginQuerier.call({procedureName:"verifyPaperEmailLoginOtp",params:{email:t,otp:s,recoveryCode:a},injectRecoveryCode:{isInjectRecoveryCode:!0}});return this.postLogin(l)})}},V=class{constructor({clientId:t,advancedOptions:s,querier:a,onAuthSuccess:l}){var h;this.clientId=t,this.advancedOptions={recoveryShareManagement:null!=(h=null==s?void 0:s.recoveryShareManagement)?h:"AWS_MANAGED"},this.AuthQuerier=a,this.localStorage=new R({clientId:t}),this.onAuthSuccess=l,this.userManagedLogin=new J({postLogin:t=>dist_i(this,null,function*(){return this.postLogin(t)}),preLogin:()=>dist_i(this,null,function*(){yield this.preLogin()}),querier:a,clientId:t}),this.awsManagedLogin=new H({postLogin:t=>dist_i(this,null,function*(){return this.postLogin(t)}),preLogin:()=>dist_i(this,null,function*(){yield this.preLogin()}),querier:a,clientId:t})}preLogin(){return dist_i(this,null,function*(){yield this.logout()})}postLogin(t){return dist_i(this,arguments,function*({storedToken:t,walletDetails:s}){return t.shouldStoreCookieString&&(yield this.localStorage.saveAuthCookie(t.cookieString)),yield this.onAuthSuccess({storedToken:t,walletDetails:s})})}loginWithJwtAuth(t){return dist_i(this,arguments,function*({token:t,authProvider:s,recoveryCode:a}){yield this.preLogin();let l=yield this.AuthQuerier.call({procedureName:"loginWithJwtAuthCallback",params:{token:t,authProvider:s,recoveryCode:a}});return this.postLogin(l)})}loginWithPaperModal(t){return dist_i(this,null,function*(){return yield this.preLogin(),"AWS_MANAGED"===this.advancedOptions.recoveryShareManagement?this.awsManagedLogin.loginWithPaperModal():this.userManagedLogin.loginWithPaperModal(t)})}loginWithPaperEmailOtp(t){return dist_i(this,null,function*(){return"AWS_MANAGED"===this.advancedOptions.recoveryShareManagement?this.awsManagedLogin.loginWithPaperEmailOtp({email:t.email}):this.userManagedLogin.loginWithPaperEmailOtp(t)})}loginWithGoogle(t){return dist_i(this,null,function*(){return"AWS_MANAGED"===this.advancedOptions.recoveryShareManagement?this.awsManagedLogin.loginWithGoogle(t):this.userManagedLogin.loginWithGoogle()})}sendPaperEmailLoginOtp(t){return dist_i(this,arguments,function*({email:t}){return"AWS_MANAGED"===this.advancedOptions.recoveryShareManagement?this.awsManagedLogin.sendPaperEmailLoginOtp({email:t,recoveryShareManagement:"AWS_MANAGED"}):this.userManagedLogin.sendPaperEmailLoginOtp({email:t})})}verifyPaperEmailLoginOtp(t){return dist_i(this,null,function*(){return"AWS_MANAGED"===this.advancedOptions.recoveryShareManagement?this.awsManagedLogin.verifyPaperEmailLoginOtp(t):this.userManagedLogin.verifyPaperEmailLoginOtp(t)})}logout(){return dist_i(this,null,function*(){let{success:t}=yield this.AuthQuerier.call({procedureName:"logout",params:void 0}),s=yield this.localStorage.removeAuthCookie(),a=yield this.localStorage.removeWalletUserId();return{success:t||s||a}})}},B=class{constructor({chain:t,clientId:s,querier:a}){this.chain=t,this.clientId=s,this.gaslessTransactionQuerier=a}callContract(t){return dist_i(this,arguments,function*({contractAddress:t,methodArgs:s,methodInterface:a}){return yield this.gaslessTransactionQuerier.call({procedureName:"callContract",params:{chain:this.chain,contractAddress:t,method:{args:s,stub:a}}})})}},$=class extends _.Signer{constructor({provider:t,clientId:s,querier:a}){var l;super(),this.DEFAULT_ETHEREUM_CHAIN_ID=5,this.clientId=s,this.querier=a,this.endpoint=null==(l=t.connection)?void 0:l.url,(0,E.defineReadOnly)(this,"provider",t)}getAddress(){return dist_i(this,null,function*(){let{address:t}=yield this.querier.call({procedureName:"getAddress",params:void 0});return t})}signMessage(t){return dist_i(this,null,function*(){var s,a,l,h;let g=yield null==(s=this.provider)?void 0:s.getNetwork();g&&g._defaultProvider;let{signedMessage:p}=yield this.querier.call({procedureName:"signMessage",params:{message:t,chainId:null!=(h=null==(l=yield null==(a=this.provider)?void 0:a.getNetwork())?void 0:l.chainId)?h:this.DEFAULT_ETHEREUM_CHAIN_ID,rpcEndpoint:this.endpoint}});return p})}signTransaction(t){return dist_i(this,null,function*(){var s,a,l;let{signedTransaction:h}=yield this.querier.call({procedureName:"signTransaction",params:{transaction:t,chainId:null!=(l=null==(a=yield null==(s=this.provider)?void 0:s.getNetwork())?void 0:a.chainId)?l:this.DEFAULT_ETHEREUM_CHAIN_ID,rpcEndpoint:this.endpoint}});return h})}_signTypedData(t,s,a){return dist_i(this,null,function*(){var l,h,g;let{signedTypedData:p}=yield this.querier.call({procedureName:"signTypedDataV4",params:{domain:t,types:s,message:a,chainId:null!=(g=null==(h=yield null==(l=this.provider)?void 0:l.getNetwork())?void 0:h.chainId)?g:this.DEFAULT_ETHEREUM_CHAIN_ID,rpcEndpoint:this.endpoint}});return p})}connect(t){return new $({clientId:this.clientId,provider:t,querier:this.querier})}},K=class{constructor({clientId:t,chain:s,querier:a}){this.clientId=t,this.chain=s,this.walletManagerQuerier=a,this.gasless=new B({chain:s,clientId:t,querier:a}),this.localStorage=new R({clientId:t})}postWalletSetUp(t){return dist_i(this,arguments,function*({deviceShareStored:t,walletAddress:s,isIframeStorageEnabled:a,walletUserId:l}){return a||(yield this.localStorage.saveDeviceShare(t,l)),{walletAddress:s}})}getUserWalletStatus(){return dist_i(this,null,function*(){let t=yield this.walletManagerQuerier.call({procedureName:"getUserStatus",params:void 0});return"Logged In, Wallet Initialized"===t.status?{status:"Logged In, Wallet Initialized",user:y(u({},t.user),{wallet:this})}:t})}setChain(t){return dist_i(this,arguments,function*({chain:t}){this.chain=t,this.gasless=new B({chain:t,clientId:this.clientId,querier:this.walletManagerQuerier})})}getEthersJsSigner(t){return dist_i(this,null,function*(){var s;return new $({clientId:this.clientId,provider:(0,f.getDefaultProvider)(null!=(s=null==t?void 0:t.rpcEndpoint)?s:w[this.chain]),querier:this.walletManagerQuerier})})}},Z=class{constructor({clientId:t,chain:s,styles:a,advancedOptions:l,onAuthSuccess:h}){this.clientId=t,this.querier=new Q({clientId:t,customizationOptions:a}),this.wallet=new K({clientId:t,chain:s,querier:this.querier}),this.auth=new V({clientId:t,advancedOptions:u({recoveryShareManagement:"USER_MANAGED"},null!=l?l:{}),querier:this.querier,onAuthSuccess:t=>dist_i(this,null,function*(){return yield this.wallet.postWalletSetUp(y(u({},t.walletDetails),{walletUserId:t.storedToken.authDetails.userWalletId})),yield this.querier.call({procedureName:"initIframe",params:{deviceShareStored:t.walletDetails.deviceShareStored,clientId:this.clientId,walletUserId:t.storedToken.authDetails.userWalletId,authCookie:t.storedToken.cookieString}}),null==h||h(t),{user:{status:"Logged In, Wallet Initialized",authDetails:t.storedToken.authDetails,wallet:this.wallet,walletAddress:t.walletDetails.walletAddress}}})})}getUser(){return dist_i(this,null,function*(){let t=yield this.wallet.getUserWalletStatus();switch(t.status){case"Logged In, New Device":case"Logged In, Wallet Uninitialized":return yield this.auth.logout(),this.getUser();case"Logged Out":return{status:"Logged Out"};case"Logged In, Wallet Initialized":return u({status:"Logged In, Wallet Initialized"},t.user)}})}}}}]);